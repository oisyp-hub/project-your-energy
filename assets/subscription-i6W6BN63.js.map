{"version":3,"file":"subscription-i6W6BN63.js","sources":["../../src/js/api/yourEnergyApi.js","../../src/js/components/rating-modal.js","../../src/js/components/exerciseModal.js","../../src/js/components/subscription.js"],"sourcesContent":["const BASE_URL = 'https://your-energy.b.goit.study/api';\n\nasync function request(endpoint, options = {}) {\n  const res = await fetch(`${BASE_URL}${endpoint}`, {\n    headers: {\n      ...(options.body ? { 'Content-Type': 'application/json' } : {}),\n      ...(options.headers || {}),\n    },\n    ...options,\n  });\n\n  let data = null;\n  const ct = res.headers.get('content-type') || '';\n  if (ct.includes('application/json')) data = await res.json();\n  else data = await res.text();\n\n  if (!res.ok) {\n    const msg =\n      (data && typeof data === 'object' && (data.message || data.error)) ||\n      `HTTP ${res.status}`;\n    throw new Error(msg);\n  }\n\n  return data;\n}\n\nexport const api = {\n  getQuote() {\n    return request('/quote');\n  },\n\n  getFilters({ filter, page = 1, limit = 12 }) {\n    const params = new URLSearchParams({ filter, page, limit });\n    return request(`/filters?${params.toString()}`);\n  },\n\n  getExercises({ bodypart, muscles, equipment, keyword, page = 1, limit = 10 } = {}) {\n    const params = new URLSearchParams();\n    if (bodypart) params.set('bodypart', bodypart);\n    if (muscles) params.set('muscles', muscles);\n    if (equipment) params.set('equipment', equipment);\n    if (keyword) params.set('keyword', keyword);\n    params.set('page', String(page));\n    params.set('limit', String(limit));\n    return request(`/exercises?${params.toString()}`);\n  },\n\n  getExerciseById(id) {\n    return request(`/exercises/${id}`);\n  },\n  rateExercise(id, { rate, email, comment } = {}) {\n    return request(`/exercises/${id}/rating`, {\n      method: 'PATCH',\n      body: JSON.stringify({\n        rate,            // ‚úÖ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ\n        email,           // ‚úÖ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ\n        comment,         // (–º–æ–∂–µ –±—É—Ç–∏ –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ; —è–∫—â–æ 400 –±—É–¥–µ –ø—Ä–æ comment ‚Äî —Å–∫–∞–∂—É —è–∫ –Ω–∞–∑–≤–∞—Ç–∏)\n      }),\n    });\n  },\n\n\n\n  // ‚úÖ –æ–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥—É\n  patchRating(id, rating) {\n    return request(`/exercises/${id}/rating`, {\n      method: 'PATCH',\n      body: JSON.stringify({ rating: Math.round(Number(rating)) }),\n    });\n  },\n\n\n  postSubscription(email) {\n    return request(`/subscription`, {\n      method: 'POST',\n      body: JSON.stringify({ email }),\n    });\n  },\n\n};\n\n","import { api } from '../api/yourEnergyApi.js';\n\nconst STAR_FULL_SRC = new URL('../../img/stars1.png', import.meta.url).href;\nconst STAR_EMPTY_SRC = new URL('../../img/starsbl.png', import.meta.url).href;\n\nlet currentExerciseId = null;\nlet currentRating = 0;\nlet els = null;\n\n// ========================\n// DOM cache\n// ========================\nfunction getElsOnce() {\n  if (els?.ratingModal && els?.ratingValueEl && els?.starsWrap && els?.form) return els;\n\n  const ratingModal = document.querySelector('#rating-modal');\n  const ratingValueEl = document.querySelector('#rating-value');\n  const starsWrap = document.querySelector('#rating-stars');\n  const form = document.querySelector('#rating-form');\n\n  if (!ratingModal || !ratingValueEl || !starsWrap || !form) return null;\n\n  els = { ratingModal, ratingValueEl, starsWrap, form };\n  return els;\n}\n\n// ========================\n// Helpers: modal visibility + body scroll\n// ========================\nfunction isModalVisible(modalEl) {\n  if (!modalEl) return false;\n  if (modalEl.classList.contains('is-hidden')) return false;\n  if (modalEl.hidden) return false;\n  if (modalEl.getAttribute('aria-hidden') === 'true') return false;\n  return true;\n}\n\nfunction anyModalOpen() {\n  const ex = document.querySelector('#exercise-modal');\n  const rt = document.querySelector('#rating-modal');\n  return isModalVisible(ex) || isModalVisible(rt);\n}\n\nfunction lockBodyScroll() {\n  const scrollBarWidth = window.innerWidth - document.documentElement.clientWidth;\n  document.body.style.overflow = 'hidden';\n  document.body.style.paddingRight = `${scrollBarWidth}px`;\n}\n\nfunction unlockBodyScrollIfNoModals() {\n  if (anyModalOpen()) return;\n  document.body.style.overflow = '';\n  document.body.style.paddingRight = '';\n}\n\n// ========================\n// FORCE hide helpers (fix stacked modals)\n// ========================\nfunction forceHideExerciseModal() {\n  const ex = document.querySelector('#exercise-modal');\n  if (!ex) return;\n\n  ex.classList.add('is-hidden');\n  ex.hidden = true;\n  ex.setAttribute('aria-hidden', 'true');\n\n  const exContent = document.querySelector('#exercise-modal-content');\n  if (exContent) exContent.innerHTML = '';\n}\n\n// ========================\n// Stars UI\n// ========================\nfunction clamp(n, min, max) {\n  return Math.min(max, Math.max(min, n));\n}\n\n/**\n * –ü—ñ–¥—Ñ–∞—Ä–±–æ–≤—É—î —ñ—Å–Ω—É—é—á—ñ –∑—ñ—Ä–∫–∏ (–±–µ–∑ –ø–µ—Ä–µ–≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—è DOM)\n */\nfunction paintStars(starsWrap, value) {\n  const fullCount = clamp(Number(value) || 0, 0, 5);\n  const btns = starsWrap.querySelectorAll('.rating-star-btn');\n\n  btns.forEach(btn => {\n    const v = Number(btn.dataset.value);\n    const img = btn.querySelector('img');\n    if (!img) return;\n    img.src = v <= fullCount ? STAR_FULL_SRC : STAR_EMPTY_SRC;\n  });\n}\n\n/**\n * –†–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–Ω–æ–ø–∫–∏-–∑—ñ—Ä–∫–∏ –û–î–ò–ù –†–ê–ó, –∞ –¥–∞–ª—ñ –º–∏ –ª–∏—à–µ paintStars()\n */\nfunction renderStars(starsWrap) {\n  starsWrap.innerHTML = '';\n\n  for (let i = 1; i <= 5; i++) {\n    const btn = document.createElement('button');\n    btn.type = 'button';\n    btn.className = 'rating-star-btn';\n    btn.dataset.value = String(i);\n    btn.setAttribute('aria-label', `${i} star${i === 1 ? '' : 's'}`);\n\n    const img = document.createElement('img');\n    img.className = 'rating-star';\n    img.src = STAR_EMPTY_SRC;\n    img.alt = '';\n    img.setAttribute('aria-hidden', 'true');\n\n    btn.append(img);\n    starsWrap.append(btn);\n  }\n\n  // —Å—Ç–∞—Ä—Ç–æ–≤–∏–π —Å—Ç–∞–Ω\n  paintStars(starsWrap, 0);\n}\n\n// ========================\n// Close / ESC\n// ========================\nfunction onEsc(e) {\n  if (e.key === 'Escape') closeRatingModal();\n}\n\nfunction closeRatingModal() {\n  const got = getElsOnce();\n  if (!got) return;\n\n  const { ratingModal, form } = got;\n\n  ratingModal.classList.add('is-hidden');\n  ratingModal.hidden = true;\n  ratingModal.setAttribute('aria-hidden', 'true');\n\n  document.removeEventListener('keydown', onEsc);\n  form.reset();\n\n  currentExerciseId = null;\n  currentRating = 0;\n\n  unlockBodyScrollIfNoModals();\n}\n\n// ========================\n// Init (call once in main.js)\n// ========================\nfunction initRatingModal() {\n  const got = getElsOnce();\n  if (!got) {\n    console.error('Rating modal DOM not found (#rating-modal, #rating-form, #rating-stars, #rating-value).');\n    return;\n  }\n\n  const { ratingModal, ratingValueEl, starsWrap, form } = got;\n\n  if (ratingModal.dataset.bound === '1') return;\n  ratingModal.dataset.bound = '1';\n\n  // ‚≠ê —Å—Ç–≤–æ—Ä—é—î–º–æ –∑—ñ—Ä–∫–∏ 1 —Ä–∞–∑\n  renderStars(starsWrap);\n\n  // ‚úÖ HOVER PREVIEW (–æ—Å—å —Ü—å–æ–≥–æ —Ç–æ–±—ñ –Ω–µ –≤–∏—Å—Ç–∞—á–∞–ª–æ)\n  starsWrap.addEventListener('mouseover', e => {\n    const btn = e.target.closest('.rating-star-btn');\n    if (!btn) return;\n    paintStars(starsWrap, Number(btn.dataset.value));\n  });\n\n  // –∫–æ–ª–∏ –∫—É—Ä—Å–æ—Ä –ø—ñ—à–æ–≤ —ñ–∑ –±–ª–æ–∫—É ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ ‚Äú–∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π‚Äù —Ä–µ–π—Ç–∏–Ω–≥\n  starsWrap.addEventListener('mouseleave', () => {\n    paintStars(starsWrap, currentRating);\n  });\n\n  // –¥–ª—è –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ (Tab)\n  starsWrap.addEventListener('focusin', e => {\n    const btn = e.target.closest('.rating-star-btn');\n    if (!btn) return;\n    paintStars(starsWrap, Number(btn.dataset.value));\n  });\n\n  starsWrap.addEventListener('focusout', () => {\n    paintStars(starsWrap, currentRating);\n  });\n\n  // click: —Ñ—ñ–∫—Å—É—î–º–æ —Ä–µ–π—Ç–∏–Ω–≥\n  starsWrap.addEventListener('click', e => {\n    const btn = e.target.closest('.rating-star-btn');\n    if (!btn) return;\n\n    currentRating = clamp(Number(btn.dataset.value), 0, 5);\n    ratingValueEl.textContent = currentRating.toFixed(1);\n    paintStars(starsWrap, currentRating);\n  });\n\n  // close by click on backdrop or close button\n  ratingModal.addEventListener('click', e => {\n    const isBackdrop = e.target === ratingModal;\n    const isCloseBtn = e.target.closest('[data-close-rating]');\n    if (isBackdrop || isCloseBtn) closeRatingModal();\n  });\n\n  // submit\n  form.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    if (!currentExerciseId) return alert('No exercise selected');\n    if (!currentRating) return alert('Please set rating');\n\n    const fd = new FormData(form);\n    const email = String(fd.get('email') || '').trim();\n    const comment = String(fd.get('comment') || '').trim();\n\n    if (!email) return alert('Please enter email');\n\n    try {\n      await api.rateExercise(currentExerciseId, {\n        rate: currentRating,\n        email,\n      });\n\n      closeRatingModal();\n      alert('Thanks! Rating sent.');\n    } catch (err) {\n      console.error('Failed to rate exercise:', err);\n      alert(`Failed to send rating: ${err.message}`);\n    }\n  });\n\n}\n\n// ========================\n// Open\n// ========================\nfunction openRatingModal(exerciseId) {\n  const got = getElsOnce();\n  if (!got) return false;\n\n  forceHideExerciseModal();\n\n  const { ratingModal, ratingValueEl, starsWrap, form } = got;\n\n  currentExerciseId = exerciseId;\n  currentRating = 0;\n\n  ratingValueEl.textContent = '0.0';\n  paintStars(starsWrap, 0);\n  form.reset();\n\n  ratingModal.hidden = false;\n  ratingModal.classList.remove('is-hidden');\n  ratingModal.setAttribute('aria-hidden', 'false');\n\n  lockBodyScroll();\n  document.addEventListener('keydown', onEsc);\n\n  return true;\n}\n\nexport { initRatingModal, openRatingModal, closeRatingModal };\n","import { api } from '../api/yourEnergyApi.js';\nimport { openRatingModal } from './rating-modal.js';\nconst PAGINATION_BP = 600; // —è–∫—â–æ —É —Ç–µ–±–µ 768 ‚Äî –∑–º—ñ–Ω–∏ —Ç—É—Ç\n\nfunction fixPaginationPlacement() {\n  const container = document.querySelector('.exercises__container');\n  if (!container) return;\n\n  const pagination = container.querySelector('.pagination');\n  if (!pagination) return;\n\n  // –º–∞—Ä–∫–µ—Ä \"–¥–µ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è –º–∞—î –∂–∏—Ç–∏ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø—ñ\"\n  let marker = container.querySelector('[data-pagination-home]');\n  if (!marker) {\n    marker = document.createElement('span');\n    marker.dataset.paginationHome = '1';\n    marker.hidden = true;\n    pagination.parentNode.insertBefore(marker, pagination);\n  }\n\n  const isMobile = window.matchMedia(`(max-width: ${PAGINATION_BP}px)`).matches;\n\n  // –∑–Ω–∞–π–¥–∏ quote (–ø—ñ–¥—Å—Ç–∞–≤ —Å–≤—ñ–π –∫–ª–∞—Å —è–∫—â–æ —ñ–Ω—à–∏–π)\n  const quote =\n    container.querySelector('.quote-card') ||\n    container.querySelector('.quote') ||\n    container.querySelector('[data-quote]');\n\n  if (isMobile && quote) {\n    // ‚úÖ –º–æ–±—ñ–ª–∫–∞: –ø—ñ—Å–ª—è –∫–∞—Ä—Ç–æ–∫, –∞–ª–µ –ø–µ—Ä–µ–¥ Quote\n    quote.insertAdjacentElement('beforebegin', pagination);\n  } else {\n    // ‚úÖ –¥–µ—Å–∫—Ç–æ–ø: –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –Ω–∞–∑–∞–¥ (–ø—ñ—Å–ª—è –º–∞—Ä–∫–µ—Ä–∞)\n    marker.insertAdjacentElement('afterend', pagination);\n  }\n}\n\n// 1) –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ\ndocument.addEventListener('DOMContentLoaded', () => {\n  fixPaginationPlacement();\n  // —è–∫—â–æ –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ–º–∞–ª—å–æ–≤—É—î—Ç—å—Å—è –ø—ñ—Å–ª—è fetch\n  setTimeout(fixPaginationPlacement, 0);\n  setTimeout(fixPaginationPlacement, 100);\n});\n\n// 2) –ø—Ä–∏ —Ä–µ—Å–∞–π–∑—ñ\nwindow.addEventListener('resize', () => {\n  fixPaginationPlacement();\n\n  // —â–æ–± –ø—Ä–∏ –∑–º—ñ–Ω—ñ —à–∏—Ä–∏–Ω–∏ (–º–æ–±/–¥–µ—Å–∫—Ç–æ–ø) –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–ª–∞—Å—å\n  if (paginationState) {\n    renderPagination(\n      paginationState.totalPages,\n      paginationState.currentPage,\n      paginationState.onPageChange\n    );\n  }\n});\n\n// ========================\n// Pagination (mobile window = 3 pages)\n// ========================\nlet paginationState = null;\n\nfunction getMobileWindow3(totalPages, currentPage) {\n  if (totalPages <= 3) {\n    return Array.from({ length: totalPages }, (_, i) => i + 1);\n  }\n\n  let start = currentPage;\n  if (start > totalPages - 2) start = totalPages - 2;\n  if (start < 1) start = 1;\n\n  return [start, start + 1, start + 2];\n}\n\nfunction buildPages(totalPages, currentPage) {\n  const isMobile = window.matchMedia(`(max-width: ${PAGINATION_BP}px)`).matches;\n  return isMobile\n    ? getMobileWindow3(totalPages, currentPage)\n    : Array.from({ length: totalPages }, (_, i) => i + 1); // –¥–µ—Å–∫—Ç–æ–ø: —è–∫ –±—É–ª–æ (–≤—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏)\n}\n\n/**\n * –†–µ–Ω–¥–µ—Ä –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó:\n * - –º–æ–±—ñ–ª–∫–∞: —Ç—ñ–ª—å–∫–∏ 3 –∫–Ω–æ–ø–∫–∏ \"–≤—ñ–∫–Ω–æ–º\" (123, 234, 345...)\n * - –¥–µ—Å–∫—Ç–æ–ø: –≤—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–º–æ–∂–µ—à –ø–æ—Ç—ñ–º —Ç–µ–∂ –æ–±–º–µ–∂–∏—Ç–∏)\n */\nexport function renderPagination(totalPages, currentPage, onPageChange) {\n  const root = document.querySelector('.pagination');\n  if (!root) return;\n\n  paginationState = { totalPages, currentPage, onPageChange };\n\n  const pages = buildPages(totalPages, currentPage);\n\n  root.innerHTML = pages\n    .map(p => {\n      const active = p === currentPage;\n      return `\n        <button\n          class=\"pagination__btn\"\n          type=\"button\"\n          data-page=\"${p}\"\n          ${active ? 'aria-current=\"page\"' : ''}\n        >${p}</button>\n      `;\n    })\n    .join('');\n\n  if (!root.dataset.bound) {\n    root.dataset.bound = '1';\n\n    root.addEventListener('click', e => {\n      const btn = e.target.closest('[data-page]');\n      if (!btn) return;\n\n      const next = Number(btn.dataset.page);\n      if (!Number.isFinite(next) || next === currentPage) return;\n\n      // callback —É —Ç–≤–æ—é –ª–æ–≥—ñ–∫—É (fetch/render)\n      if (paginationState?.onPageChange) paginationState.onPageChange(next);\n    });\n  }\n}\n\nconst LS_KEY = 'yourEnergy:favorites';\n\n// ‚úÖ Vite-friendly assets\nconst STAR_FULL_SRC = new URL('../../img/stars1.png', import.meta.url).href;\nconst STAR_EMPTY_SRC = new URL('../../img/starsbl.png', import.meta.url).href;\n\nlet isLoading = false;\nconst cache = new Map();\n\nlet currentExerciseId = null;\nlet currentExerciseData = null;\n\n// ========================\n// Favorites helpers\n// ========================\nfunction getFavs() {\n  try {\n    const raw = localStorage.getItem(LS_KEY);\n    const arr = raw ? JSON.parse(raw) : [];\n    return Array.isArray(arr) ? arr : [];\n  } catch {\n    return [];\n  }\n}\n\nfunction isFav(id) {\n  return getFavs().some(x => x?._id === id);\n}\n\nfunction saveFavs(arr) {\n  localStorage.setItem(LS_KEY, JSON.stringify(arr));\n  window.dispatchEvent(new CustomEvent('favorites:changed'));\n}\n\nfunction addFav(ex) {\n  const favs = getFavs();\n  if (favs.some(x => x?._id === ex?._id)) return;\n  favs.unshift(ex);\n  saveFavs(favs);\n}\n\nfunction removeFav(id) {\n  const favs = getFavs().filter(x => x?._id !== id);\n  saveFavs(favs);\n}\n\n// ========================\n// DOM (safe getter)\n// ========================\nfunction getModalEls() {\n  const modal = document.querySelector('#exercise-modal'); // backdrop\n  const content = document.querySelector('#exercise-modal-content');\n  return { modal, content };\n}\n\n// ========================\n// FORCE hide helpers (fix stacking modals)\n// ========================\nfunction forceHideExerciseModal() {\n  const { modal, content } = getModalEls();\n  if (!modal) return;\n\n  modal.classList.add('is-hidden');\n  modal.hidden = true; // üî• –≤–∞–∂–ª–∏–≤–æ, —â–æ–± —Ç–æ—á–Ω–æ –ø—Ä–æ–ø–∞–≤\n  modal.setAttribute('aria-hidden', 'true');\n\n  if (content) content.innerHTML = '';\n\n  // —è–∫—â–æ —Ü–µ –±—É–≤ —î–¥–∏–Ω–∏–π –≤—ñ–¥–∫—Ä–∏—Ç–∏–π –º–æ–¥–∞–ª ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ —Å–∫—Ä–æ–ª\n  document.body.style.overflow = '';\n  document.body.style.paddingRight = '';\n}\n\nfunction forceHideRatingModal() {\n  const rating = document.querySelector('#rating-modal');\n  if (!rating) return;\n\n  rating.classList.add('is-hidden');\n  rating.hidden = true;\n  rating.setAttribute('aria-hidden', 'true');\n}\n\n// ========================\n// Modal open/close\n// ========================\nfunction onEsc(e) {\n  if (e.key === 'Escape') closeModal();\n}\n\nfunction openModal() {\n  const { modal } = getModalEls();\n  if (!modal) return;\n\n  // üî• —è–∫—â–æ —Ä–∞–ø—Ç–æ–º –≤—ñ–¥–∫—Ä–∏—Ç–∏–π rating ‚Äî —Ö–æ–≤–∞—î–º–æ –π–æ–≥–æ\n  forceHideRatingModal();\n\n  const scrollBarWidth = window.innerWidth - document.documentElement.clientWidth;\n\n  modal.hidden = false; // üî• –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –Ω–∞–∑–∞–¥\n  modal.classList.remove('is-hidden');\n  modal.setAttribute('aria-hidden', 'false');\n\n  document.body.style.overflow = 'hidden';\n  document.body.style.paddingRight = `${scrollBarWidth}px`;\n\n  document.addEventListener('keydown', onEsc);\n}\n\nexport function closeModal() {\n  const { modal, content } = getModalEls();\n  if (!modal) return;\n\n  modal.classList.add('is-hidden');\n  modal.hidden = true; // üî• –≤–∞–∂–ª–∏–≤–æ\n  modal.setAttribute('aria-hidden', 'true');\n\n  if (content) content.innerHTML = '';\n\n  document.body.style.overflow = '';\n  document.body.style.paddingRight = '';\n\n  document.removeEventListener('keydown', onEsc);\n\n  currentExerciseId = null;\n  currentExerciseData = null;\n}\n\n// ========================\n// UI helpers\n// ========================\nfunction clamp(n, min, max) {\n  return Math.min(max, Math.max(min, n));\n}\n\nfunction formatRating(value) {\n  const n = Number(value);\n  return Number.isFinite(n) ? n.toFixed(1) : '-';\n}\n\nfunction getFullStarsCount(ratingValue) {\n  const n = Number(ratingValue);\n  if (!Number.isFinite(n)) return 0;\n  return clamp(Math.round(n), 0, 5);\n}\n\nfunction renderStars(ratingValue) {\n  const full = getFullStarsCount(ratingValue);\n  const empty = 5 - full;\n\n  const fullImg = `<img class=\"modal-exercise__star\" src=\"${STAR_FULL_SRC}\" alt=\"\" aria-hidden=\"true\" />`;\n  const emptyImg = `<img class=\"modal-exercise__star\" src=\"${STAR_EMPTY_SRC}\" alt=\"\" aria-hidden=\"true\" />`;\n\n  return `\n    <div class=\"modal-exercise__stars\" aria-label=\"${full} out of 5 stars\">\n      ${fullImg.repeat(full)}${emptyImg.repeat(empty)}\n    </div>\n  `;\n}\n\nfunction renderLoading() {\n  const { content } = getModalEls();\n  if (!content) return;\n\n  content.innerHTML = `\n    <div class=\"modal-exercise__media\"></div>\n    <div class=\"modal-exercise__info\">\n      <h2 class=\"modal-exercise__title\">Loading...</h2>\n      <p class=\"modal-exercise__desc\">Please wait</p>\n\n      <div class=\"modal-exercise__actions\">\n        <button class=\"btn btn--light\" type=\"button\" disabled>Loading...</button>\n        <button class=\"btn btn--outline\" type=\"button\" disabled>Give a rating</button>\n      </div>\n    </div>\n  `;\n}\n\nfunction renderExercise(data, exerciseId) {\n  const { content } = getModalEls();\n  if (!content) return;\n\n  const name = data?.name ?? 'Exercise';\n  const gifUrl = data?.gifUrl ?? '';\n\n  const ratingText = formatRating(data?.rating);\n  const starsHtml = renderStars(data?.rating);\n\n  const target = data?.target ?? '-';\n  const bodyPart = data?.bodyPart ?? '-';\n  const burnedCalories = data?.burnedCalories ?? '-';\n  const description = data?.description ?? '';\n\n  const equipment = data?.equipment ?? 'body weight';\n  const popular = data?.popular ?? data?.popularity ?? '150';\n\n  const favText = isFav(exerciseId) ? 'Remove from favorites' : 'Add to favorites ‚ô°';\n\n  content.innerHTML = `\n    <div class=\"modal-exercise__media\">\n      ${gifUrl ? `<img class=\"modal-exercise__img\" src=\"${gifUrl}\" alt=\"${name}\" loading=\"lazy\" />` : ''}\n    </div>\n\n    <div class=\"modal-exercise__info\">\n      <h2 class=\"modal-exercise__title\">${name}</h2>\n\n      <div class=\"modal-exercise__rating-row\">\n        <span class=\"modal-exercise__rating-num\">${ratingText}</span>\n        ${starsHtml}\n      </div>\n\n      <div class=\"modal-exercise__divider\"></div>\n\n      <div class=\"modal-exercise__tags\">\n        <span class=\"tag\">Target <b>${target}</b></span>\n        <span class=\"tag\">Body Part <b>${bodyPart}</b></span>\n        <span class=\"tag\">Equipment <b>${equipment}</b></span>\n        <span class=\"tag\">Popular <b>${popular}</b></span>\n      </div>\n\n      <p class=\"modal-exercise__calories\">\n        Burned calories:<br> <b>${burnedCalories} / 3 min</b>\n      </p>\n\n      <div class=\"modal-exercise__divider\"></div>\n\n      <p class=\"modal-exercise__desc\">${description}</p>\n\n      <div class=\"modal-exercise__actions\">\n        <button class=\"btn btn--light\" type=\"button\" data-fav-toggle>${favText}</button>\n\n        <button\n          class=\"btn btn--outline\"\n          type=\"button\"\n          data-open-rating\n          data-exercise-id=\"${exerciseId}\"\n        >\n          Give a rating\n        </button>\n      </div>\n    </div>\n  `;\n}\n\n// ========================\n// Event binding (safe)\n// ========================\nfunction bindModalEventsOnce() {\n  const { modal, content } = getModalEls();\n  if (!modal || !content) return;\n\n  if (modal.dataset.bound) return;\n  modal.dataset.bound = '1';\n\n  // close by click on backdrop / close button\n  modal.addEventListener('click', e => {\n    const isBackdrop = e.target === modal;\n    const isCloseBtn = e.target.closest('[data-close-modal]');\n    if (isBackdrop || isCloseBtn) closeModal();\n  });\n\n  // delegation inside content\n  content.addEventListener('click', e => {\n    // ‚≠ê rating\n    const ratingBtn = e.target.closest('[data-open-rating]');\n    if (ratingBtn) {\n      const exerciseId = ratingBtn.dataset.exerciseId;\n      if (!exerciseId) return console.error('Give a rating: missing data-exercise-id');\n\n      // üî• –ó–ê–õ–Ü–ó–ù–û: —Ö–æ–≤–∞—î–º–æ exercise modal –ø–µ—Ä–µ–¥ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è–º rating\n      closeModal();\n\n      // —è–∫—â–æ –¥–µ—Å—å –∑–∞–ª–∏—à–∏–≤—Å—è –≤–∏–¥–∏–º–∏–º ‚Äî –ø—Ä–∏–±‚Äô—î–º–æ\n      forceHideExerciseModal();\n\n      // üî• –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ —Ä–µ–π—Ç–∏–Ω–≥\n      requestAnimationFrame(() => openRatingModal(exerciseId));\n      return;\n    }\n\n    // ‚ù§Ô∏è favorites toggle\n    const favBtn = e.target.closest('[data-fav-toggle]');\n    if (!favBtn) return;\n\n    if (!currentExerciseId || !currentExerciseData) return;\n\n    if (isFav(currentExerciseId)) {\n      removeFav(currentExerciseId);\n    } else {\n      addFav({\n        _id: currentExerciseData._id,\n        name: currentExerciseData.name,\n        burnedCalories: currentExerciseData.burnedCalories,\n        target: currentExerciseData.target,\n        bodyPart: currentExerciseData.bodyPart,\n        equipment: currentExerciseData.equipment,\n        rating: currentExerciseData.rating,\n        gifUrl: currentExerciseData.gifUrl,\n        description: currentExerciseData.description,\n        popular: currentExerciseData.popular ?? currentExerciseData.popularity,\n      });\n    }\n\n    renderExercise(currentExerciseData, currentExerciseId);\n  });\n}\n\nbindModalEventsOnce();\ndocument.addEventListener('DOMContentLoaded', bindModalEventsOnce);\n\n// ========================\n// Public open\n// ========================\nexport async function openExerciseModal(exerciseId) {\n  if (!exerciseId) {\n    console.error('openExerciseModal: exerciseId is missing');\n    return;\n  }\n\n  const { modal, content } = getModalEls();\n  if (!modal || !content) {\n    console.warn('openExerciseModal: modal DOM not found on this page');\n    return;\n  }\n\n  if (isLoading) return;\n  isLoading = true;\n\n  try {\n    currentExerciseId = exerciseId;\n\n    // üî• —è–∫—â–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π rating ‚Äî –ø—Ä–∏–±‚Äô—î–º–æ –π–æ–≥–æ\n    forceHideRatingModal();\n\n    openModal();\n    renderLoading();\n\n    if (cache.has(exerciseId)) {\n      const data = cache.get(exerciseId);\n      currentExerciseData = data;\n      renderExercise(data, exerciseId);\n      return;\n    }\n\n    const data = await api.getExerciseById(exerciseId);\n    if (!data) throw new Error('No data returned from API');\n\n    cache.set(exerciseId, data);\n    currentExerciseData = data;\n    renderExercise(data, exerciseId);\n  } catch (err) {\n    console.error('openExerciseModal error:', err);\n    alert('Failed to load exercise');\n    closeModal();\n  } finally {\n    isLoading = false;\n  }\n}\n","import { api } from '../api/yourEnergyApi.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.querySelector('.footer__form');\n  if (!form) return;\n\n  form.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    const emailInput =\n      form.querySelector('input[type=\"email\"]') ||\n      form.querySelector('input[name=\"email\"]');\n\n    const email = emailInput?.value?.trim();\n    if (!email) return;\n\n    try {\n      // —è–∫—â–æ —É —Ç–µ–±–µ –≤ api —î –º–µ—Ç–æ–¥ subscription/subscribe ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π –π–æ–≥–æ\n      if (typeof api?.subscription === 'function') {\n        await api.subscription({ email });\n      } else if (typeof api?.subscribe === 'function') {\n        await api.subscribe({ email });\n      } else {\n        // fallback –Ω–∞–ø—Ä—è–º—É\n        const res = await fetch('https://your-energy.b.goit.study/api/subscription', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ email }),\n        });\n        if (!res.ok) throw new Error(`Subscription failed: ${res.status}`);\n      }\n\n      form.reset();\n      // —Ç—É—Ç –º–æ–∂–µ—à –ø–æ–∫–∞–∑–∞—Ç–∏ ‚Äúsuccess‚Äù —è–∫ —É –º–∞–∫–µ—Ç—ñ\n    } catch (err) {\n      console.error('‚ùå Subscription error:', err);\n    }\n  });\n});\n"],"names":["BASE_URL","request","endpoint","options","res","data","msg","api","filter","page","limit","params","bodypart","muscles","equipment","keyword","id","rate","email","comment","rating","STAR_FULL_SRC","STAR_EMPTY_SRC","currentExerciseId","currentRating","els","getElsOnce","ratingModal","ratingValueEl","starsWrap","form","isModalVisible","modalEl","anyModalOpen","ex","rt","lockBodyScroll","scrollBarWidth","unlockBodyScrollIfNoModals","forceHideExerciseModal","exContent","clamp","n","min","max","paintStars","value","fullCount","btn","v","img","renderStars","i","onEsc","closeRatingModal","got","initRatingModal","e","isBackdrop","isCloseBtn","fd","err","openRatingModal","exerciseId","PAGINATION_BP","fixPaginationPlacement","container","pagination","marker","isMobile","quote","paginationState","renderPagination","getMobileWindow3","totalPages","currentPage","_","start","buildPages","onPageChange","root","pages","p","next","LS_KEY","isLoading","cache","currentExerciseData","getFavs","raw","arr","isFav","x","saveFavs","addFav","favs","removeFav","getModalEls","modal","content","forceHideRatingModal","closeModal","openModal","formatRating","getFullStarsCount","ratingValue","full","empty","fullImg","emptyImg","renderLoading","renderExercise","name","gifUrl","ratingText","starsHtml","target","bodyPart","burnedCalories","description","popular","favText","bindModalEventsOnce","ratingBtn","openExerciseModal","emailInput","_a"],"mappings":"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"}