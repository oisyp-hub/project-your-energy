{"version":3,"file":"subscription-BcEsYp59.js","sources":["../../src/js/api/yourEnergyApi.js","../../src/js/components/rating-modal.js","../../src/js/components/exerciseModal.js","../../src/js/components/mobileMenu.js","../../src/js/components/subscription.js"],"sourcesContent":["const BASE_URL = 'https://your-energy.b.goit.study/api';\n\nasync function request(endpoint, options = {}) {\n  const res = await fetch(`${BASE_URL}${endpoint}`, {\n    headers: {\n      ...(options.body ? { 'Content-Type': 'application/json' } : {}),\n      ...(options.headers || {}),\n    },\n    ...options,\n  });\n\n  let data = null;\n  const ct = res.headers.get('content-type') || '';\n  if (ct.includes('application/json')) data = await res.json();\n  else data = await res.text();\n\n  if (!res.ok) {\n    const msg =\n      (data && typeof data === 'object' && (data.message || data.error)) ||\n      `HTTP ${res.status}`;\n    throw new Error(msg);\n  }\n\n  return data;\n}\n\nexport const api = {\n  getQuote() {\n    return request('/quote');\n  },\n\n  getFilters({ filter, page = 1, limit = 12 }) {\n    const params = new URLSearchParams({ filter, page, limit });\n    return request(`/filters?${params.toString()}`);\n  },\n\n  getExercises({ bodypart, muscles, equipment, keyword, page = 1, limit = 12 } = {}) {\n    const params = new URLSearchParams();\n    if (bodypart) params.set('bodypart', bodypart);\n    if (muscles) params.set('muscles', muscles);\n    if (equipment) params.set('equipment', equipment);\n    if (keyword) params.set('keyword', keyword);\n    params.set('page', String(page));\n    params.set('limit', String(limit));\n    return request(`/exercises?${params.toString()}`);\n  },\n\n  getExerciseById(id) {\n    return request(`/exercises/${id}`);\n  },\n  rateExercise(id, { rate, email, comment } = {}) {\n    return request(`/exercises/${id}/rating`, {\n      method: 'PATCH',\n      body: JSON.stringify({\n        rate,            // ✅ обов’язково\n        email,           // ✅ обов’язково\n        comment,         // (може бути опціонально; якщо 400 буде про comment — скажу як назвати)\n      }),\n    });\n  },\n\n\n\n  // ✅ один правильний метод для рейтингу\n  patchRating(id, rating) {\n    return request(`/exercises/${id}/rating`, {\n      method: 'PATCH',\n      body: JSON.stringify({ rating: Math.round(Number(rating)) }),\n    });\n  },\n\n\n  postSubscription(email) {\n    return request(`/subscription`, {\n      method: 'POST',\n      body: JSON.stringify({ email }),\n    });\n  },\n\n};\n\n","import { api } from '../api/yourEnergyApi.js';\n\nconst STAR_FULL_SRC = new URL('../../img/stars1.png', import.meta.url).href;\nconst STAR_EMPTY_SRC = new URL('../../img/starsbl.png', import.meta.url).href;\n\nlet currentExerciseId = null;\nlet currentRating = 0;\nlet els = null;\n\n// ========================\n// DOM cache\n// ========================\nfunction getElsOnce() {\n  if (els?.ratingModal && els?.ratingValueEl && els?.starsWrap && els?.form) return els;\n\n  const ratingModal = document.querySelector('#rating-modal');\n  const ratingValueEl = document.querySelector('#rating-value');\n  const starsWrap = document.querySelector('#rating-stars');\n  const form = document.querySelector('#rating-form');\n\n  if (!ratingModal || !ratingValueEl || !starsWrap || !form) return null;\n\n  els = { ratingModal, ratingValueEl, starsWrap, form };\n  return els;\n}\n\n// ========================\n// Helpers: modal visibility + body scroll\n// ========================\nfunction isModalVisible(modalEl) {\n  if (!modalEl) return false;\n  if (modalEl.classList.contains('is-hidden')) return false;\n  if (modalEl.hidden) return false;\n  if (modalEl.getAttribute('aria-hidden') === 'true') return false;\n  return true;\n}\n\nfunction anyModalOpen() {\n  const ex = document.querySelector('#exercise-modal');\n  const rt = document.querySelector('#rating-modal');\n  return isModalVisible(ex) || isModalVisible(rt);\n}\n\nfunction lockBodyScroll() {\n  const scrollBarWidth = window.innerWidth - document.documentElement.clientWidth;\n  document.body.style.overflow = 'hidden';\n  document.body.style.paddingRight = `${scrollBarWidth}px`;\n}\n\nfunction unlockBodyScrollIfNoModals() {\n  if (anyModalOpen()) return;\n  document.body.style.overflow = '';\n  document.body.style.paddingRight = '';\n}\n\n// ========================\n// Toast (instead of alert)\n// ========================\nlet toastTimer = null;\n\nfunction showToast(text, type = 'success') {\n  // прибрати попередній toast\n  const old = document.querySelector('.rating-toast');\n  if (old) old.remove();\n  if (toastTimer) clearTimeout(toastTimer);\n\n  const el = document.createElement('div');\n  el.className = `rating-toast rating-toast--${type}`;\n  el.textContent = text;\n\n  document.body.appendChild(el);\n\n  requestAnimationFrame(() => el.classList.add('is-visible'));\n\n  toastTimer = setTimeout(() => {\n    el.classList.remove('is-visible');\n    setTimeout(() => el.remove(), 250);\n  }, 2200);\n}\n\n// ========================\n// Stars UI\n// ========================\nfunction clamp(n, min, max) {\n  return Math.min(max, Math.max(min, n));\n}\n\nfunction paintStars(starsWrap, value) {\n  const fullCount = clamp(Number(value) || 0, 0, 5);\n  const btns = starsWrap.querySelectorAll('.rating-star-btn');\n\n  btns.forEach(btn => {\n    const v = Number(btn.dataset.value);\n    const img = btn.querySelector('img');\n    if (!img) return;\n    img.src = v <= fullCount ? STAR_FULL_SRC : STAR_EMPTY_SRC;\n  });\n}\n\nfunction renderStars(starsWrap) {\n  starsWrap.innerHTML = '';\n\n  for (let i = 1; i <= 5; i++) {\n    const btn = document.createElement('button');\n    btn.type = 'button';\n    btn.className = 'rating-star-btn';\n    btn.dataset.value = String(i);\n    btn.setAttribute('aria-label', `${i} star${i === 1 ? '' : 's'}`);\n\n    const img = document.createElement('img');\n    img.className = 'rating-star';\n    img.src = STAR_EMPTY_SRC;\n    img.alt = '';\n    img.setAttribute('aria-hidden', 'true');\n\n    btn.append(img);\n    starsWrap.append(btn);\n  }\n\n  paintStars(starsWrap, 0);\n}\n\n// ========================\n// Close / ESC\n// ========================\nfunction onEsc(e) {\n  if (e.key === 'Escape') closeRatingModal();\n}\n\nfunction closeRatingModal() {\n  const got = getElsOnce();\n  if (!got) return;\n\n  const { ratingModal, form } = got;\n\n  ratingModal.classList.add('is-hidden');\n  ratingModal.hidden = true;\n  ratingModal.setAttribute('aria-hidden', 'true');\n\n  document.removeEventListener('keydown', onEsc);\n  form.reset();\n\n  currentExerciseId = null;\n  currentRating = 0;\n\n  unlockBodyScrollIfNoModals();\n\n  // ✅ без циклічних імпортів: кажемо exerciseModal “повернись”\n  window.dispatchEvent(new CustomEvent('rating:closed'));\n}\n\n// ========================\n// Init (call once in main.js)\n// ========================\nfunction initRatingModal() {\n  const got = getElsOnce();\n  if (!got) {\n    console.error(\n      'Rating modal DOM not found (#rating-modal, #rating-form, #rating-stars, #rating-value).'\n    );\n    return;\n  }\n\n  const { ratingModal, ratingValueEl, starsWrap, form } = got;\n\n  if (ratingModal.dataset.bound === '1') return;\n  ratingModal.dataset.bound = '1';\n\n  renderStars(starsWrap);\n\n  // ✅ HOVER PREVIEW\n  starsWrap.addEventListener('mouseover', e => {\n    const btn = e.target.closest('.rating-star-btn');\n    if (!btn) return;\n    paintStars(starsWrap, Number(btn.dataset.value));\n  });\n\n  starsWrap.addEventListener('mouseleave', () => {\n    paintStars(starsWrap, currentRating);\n  });\n\n  // keyboard focus preview\n  starsWrap.addEventListener('focusin', e => {\n    const btn = e.target.closest('.rating-star-btn');\n    if (!btn) return;\n    paintStars(starsWrap, Number(btn.dataset.value));\n  });\n\n  starsWrap.addEventListener('focusout', () => {\n    paintStars(starsWrap, currentRating);\n  });\n\n  // click: set rating\n  starsWrap.addEventListener('click', e => {\n    const btn = e.target.closest('.rating-star-btn');\n    if (!btn) return;\n\n    currentRating = clamp(Number(btn.dataset.value), 0, 5);\n    ratingValueEl.textContent = currentRating.toFixed(1);\n    paintStars(starsWrap, currentRating);\n  });\n\n  // close by click on backdrop or close button\n  ratingModal.addEventListener('click', e => {\n    const isBackdrop = e.target === ratingModal;\n    const isCloseBtn = e.target.closest('[data-close-rating]');\n    if (isBackdrop || isCloseBtn) closeRatingModal();\n  });\n\n  // submit\n  form.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    if (!currentExerciseId) {\n      showToast('No exercise selected', 'error');\n      return;\n    }\n\n    if (!currentRating) {\n      showToast('Please set rating', 'error');\n      return;\n    }\n\n    const fd = new FormData(form);\n    const email = String(fd.get('email') || '').trim();\n    // comment зараз у тебе не відправляється в API — залишаю як є\n    // const comment = String(fd.get('comment') || '').trim();\n\n    if (!email) {\n      showToast('Please enter email', 'error');\n      return;\n    }\n\n    try {\n      await api.rateExercise(currentExerciseId, {\n        rate: currentRating,\n        email,\n      });\n\n      closeRatingModal();\n      showToast('Thanks! Rating sent.', 'success');\n    } catch (err) {\n      console.error('Failed to rate exercise:', err);\n      showToast(`Failed to send rating: ${err.message}`, 'error');\n    }\n  });\n}\n\n// ========================\n// Open\n// ========================\nfunction openRatingModal(exerciseId) {\n  const got = getElsOnce();\n  if (!got) return false;\n\n  const { ratingModal, ratingValueEl, starsWrap, form } = got;\n\n  currentExerciseId = exerciseId;\n  currentRating = 0;\n\n  ratingValueEl.textContent = '0.0';\n  paintStars(starsWrap, 0);\n  form.reset();\n\n  ratingModal.hidden = false;\n  ratingModal.classList.remove('is-hidden');\n  ratingModal.setAttribute('aria-hidden', 'false');\n\n  lockBodyScroll();\n  document.addEventListener('keydown', onEsc);\n\n  return true;\n}\n\nexport { initRatingModal, openRatingModal, closeRatingModal };\n","import { api } from '../api/yourEnergyApi.js';\nimport { openRatingModal } from './rating-modal.js';\n\nconst PAGINATION_BP = 600; // якщо у тебе 768 — зміни тут\n\nfunction fixPaginationPlacement() {\n  const container = document.querySelector('.exercises__container');\n  if (!container) return;\n\n  const pagination = container.querySelector('.pagination');\n  if (!pagination) return;\n\n  // маркер \"де пагінація має жити на десктопі\"\n  let marker = container.querySelector('[data-pagination-home]');\n  if (!marker) {\n    marker = document.createElement('span');\n    marker.dataset.paginationHome = '1';\n    marker.hidden = true;\n    pagination.parentNode.insertBefore(marker, pagination);\n  }\n\n  const isMobile = window.matchMedia(`(max-width: ${PAGINATION_BP}px)`).matches;\n\n  const quote =\n    container.querySelector('.quote-card') ||\n    container.querySelector('.quote') ||\n    container.querySelector('[data-quote]');\n\n  if (isMobile && quote) {\n    quote.insertAdjacentElement('beforebegin', pagination);\n  } else {\n    marker.insertAdjacentElement('afterend', pagination);\n  }\n}\n\n// 1) при старті\ndocument.addEventListener('DOMContentLoaded', () => {\n  fixPaginationPlacement();\n  setTimeout(fixPaginationPlacement, 0);\n  setTimeout(fixPaginationPlacement, 100);\n});\n\n// 2) при ресайзі\nwindow.addEventListener('resize', () => {\n  fixPaginationPlacement();\n\n  if (paginationState) {\n    renderPagination(\n      paginationState.totalPages,\n      paginationState.currentPage,\n      paginationState.onPageChange\n    );\n  }\n});\n\n// ========================\n// Pagination (mobile window = 3 pages)\n// ========================\nlet paginationState = null;\n\nfunction getMobileWindow3(totalPages, currentPage) {\n  if (totalPages <= 3) {\n    return Array.from({ length: totalPages }, (_, i) => i + 1);\n  }\n\n  let start = currentPage;\n  if (start > totalPages - 2) start = totalPages - 2;\n  if (start < 1) start = 1;\n\n  return [start, start + 1, start + 2];\n}\n\nfunction buildPages(totalPages, currentPage) {\n  const isMobile = window.matchMedia(`(max-width: ${PAGINATION_BP}px)`).matches;\n  return isMobile\n    ? getMobileWindow3(totalPages, currentPage)\n    : Array.from({ length: totalPages }, (_, i) => i + 1);\n}\n\nexport function renderPagination(totalPages, currentPage, onPageChange) {\n  const root = document.querySelector('.pagination');\n  if (!root) return;\n\n  paginationState = { totalPages, currentPage, onPageChange };\n\n  const pages = buildPages(totalPages, currentPage);\n\n  root.innerHTML = pages\n    .map(p => {\n      const active = p === currentPage;\n      return `\n        <button\n          class=\"pagination__btn\"\n          type=\"button\"\n          data-page=\"${p}\"\n          ${active ? 'aria-current=\"page\"' : ''}\n        >${p}</button>\n      `;\n    })\n    .join('');\n\n  if (!root.dataset.bound) {\n    root.dataset.bound = '1';\n\n    root.addEventListener('click', e => {\n      const btn = e.target.closest('[data-page]');\n      if (!btn) return;\n\n      const next = Number(btn.dataset.page);\n      if (!Number.isFinite(next) || next === currentPage) return;\n\n      if (paginationState?.onPageChange) paginationState.onPageChange(next);\n    });\n  }\n}\n\nconst LS_KEY = 'yourEnergy:favorites';\n\n// ✅ Vite-friendly assets\nconst STAR_FULL_SRC = new URL('../../img/stars1.png', import.meta.url).href;\nconst STAR_EMPTY_SRC = new URL('../../img/starsbl.png', import.meta.url).href;\n\nlet isLoading = false;\nconst cache = new Map();\n\nlet currentExerciseId = null;\nlet currentExerciseData = null;\n\n// ✅ для повернення модалки після рейтингу\nlet wasSuspendedForRating = false;\nlet prevExerciseModalDisplay = '';\n\n// ========================\n// Favorites helpers\n// ========================\nfunction getFavs() {\n  try {\n    const raw = localStorage.getItem(LS_KEY);\n    const arr = raw ? JSON.parse(raw) : [];\n    return Array.isArray(arr) ? arr : [];\n  } catch {\n    return [];\n  }\n}\n\nfunction isFav(id) {\n  return getFavs().some(x => x?._id === id);\n}\n\nfunction saveFavs(arr) {\n  localStorage.setItem(LS_KEY, JSON.stringify(arr));\n  window.dispatchEvent(new CustomEvent('favorites:changed'));\n}\n\nfunction addFav(ex) {\n  const favs = getFavs();\n  if (favs.some(x => x?._id === ex?._id)) return;\n  favs.unshift(ex);\n  saveFavs(favs);\n}\n\nfunction removeFav(id) {\n  const favs = getFavs().filter(x => x?._id !== id);\n  saveFavs(favs);\n}\n\n// ========================\n// DOM (safe getter)\n// ========================\nfunction getModalEls() {\n  const modal = document.querySelector('#exercise-modal'); // backdrop\n  const content = document.querySelector('#exercise-modal-content');\n  return { modal, content };\n}\n\n// ========================\n// Rating modal helper\n// ========================\nfunction forceHideRatingModal() {\n  const rating = document.querySelector('#rating-modal');\n  if (!rating) return;\n\n  rating.classList.add('is-hidden');\n  rating.hidden = true;\n  rating.setAttribute('aria-hidden', 'true');\n}\n\n// ========================\n// ✅ Suspend / Resume (exercise <-> rating)\n// ========================\nexport function suspendExerciseModalForRating() {\n  const { modal } = getModalEls();\n  if (!modal) return false;\n\n  const isOpen = !modal.hidden && !modal.classList.contains('is-hidden');\n  if (!isOpen) return false;\n\n  wasSuspendedForRating = true;\n\n  // ✅ прибрати з рендера повністю (щоб не було “позаду”)\n  prevExerciseModalDisplay = modal.style.display || '';\n  modal.style.display = 'none';\n\n  // семантика\n  modal.classList.add('is-hidden');\n  modal.hidden = true;\n  modal.setAttribute('aria-hidden', 'true');\n\n  // ESC для exercise — вимикаємо\n  document.removeEventListener('keydown', onEsc);\n\n  return true;\n}\n\nexport function resumeExerciseModalAfterRating() {\n  if (!wasSuspendedForRating) return false;\n\n  const { modal } = getModalEls();\n  if (!modal) return false;\n\n  // ✅ повернути назад\n  modal.style.display = prevExerciseModalDisplay;\n\n  modal.hidden = false;\n  modal.classList.remove('is-hidden');\n  modal.setAttribute('aria-hidden', 'false');\n\n  document.addEventListener('keydown', onEsc);\n\n  wasSuspendedForRating = false;\n  prevExerciseModalDisplay = '';\n  return true;\n}\n\n// ========================\n// Modal open/close\n// ========================\nfunction onEsc(e) {\n  if (e.key === 'Escape') closeModal();\n}\n\nfunction openModal() {\n  const { modal } = getModalEls();\n  if (!modal) return;\n\n  forceHideRatingModal();\n\n  const scrollBarWidth = window.innerWidth - document.documentElement.clientWidth;\n\n  modal.hidden = false;\n  modal.classList.remove('is-hidden');\n  modal.setAttribute('aria-hidden', 'false');\n\n  // ✅ lock scroll\n  document.body.style.overflow = 'hidden';\n  document.body.style.paddingRight = `${scrollBarWidth}px`;\n\n  document.addEventListener('keydown', onEsc);\n}\n\nexport function closeModal() {\n  const { modal, content } = getModalEls();\n  if (!modal) return;\n\n  modal.classList.add('is-hidden');\n  modal.hidden = true;\n  modal.setAttribute('aria-hidden', 'true');\n\n  // ✅ повністю повертаємо display, якщо було \"paused\"\n  modal.style.display = prevExerciseModalDisplay;\n\n  if (content) content.innerHTML = '';\n\n  document.body.style.overflow = '';\n  document.body.style.paddingRight = '';\n\n  document.removeEventListener('keydown', onEsc);\n\n  currentExerciseId = null;\n  currentExerciseData = null;\n\n  wasSuspendedForRating = false;\n  prevExerciseModalDisplay = '';\n}\n\n// ========================\n// UI helpers\n// ========================\nfunction clamp(n, min, max) {\n  return Math.min(max, Math.max(min, n));\n}\n\nfunction formatRating(value) {\n  const n = Number(value);\n  return Number.isFinite(n) ? n.toFixed(1) : '-';\n}\n\nfunction getFullStarsCount(ratingValue) {\n  const n = Number(ratingValue);\n  if (!Number.isFinite(n)) return 0;\n  return clamp(Math.round(n), 0, 5);\n}\n\nfunction renderStars(ratingValue) {\n  const full = getFullStarsCount(ratingValue);\n  const empty = 5 - full;\n\n  const fullImg = `<img class=\"modal-exercise__star\" src=\"${STAR_FULL_SRC}\" alt=\"\" aria-hidden=\"true\" />`;\n  const emptyImg = `<img class=\"modal-exercise__star\" src=\"${STAR_EMPTY_SRC}\" alt=\"\" aria-hidden=\"true\" />`;\n\n  return `\n    <div class=\"modal-exercise__stars\" aria-label=\"${full} out of 5 stars\">\n      ${fullImg.repeat(full)}${emptyImg.repeat(empty)}\n    </div>\n  `;\n}\n\nfunction renderLoading() {\n  const { content } = getModalEls();\n  if (!content) return;\n\n  content.innerHTML = `\n    <div class=\"modal-exercise__media\"></div>\n    <div class=\"modal-exercise__info\">\n      <h2 class=\"modal-exercise__title\">Loading...</h2>\n      <p class=\"modal-exercise__desc\">Please wait</p>\n\n      <div class=\"modal-exercise__actions\">\n        <button class=\"btn btn--light\" type=\"button\" disabled>Loading...</button>\n        <button class=\"btn btn--outline\" type=\"button\" disabled>Give a rating</button>\n      </div>\n    </div>\n  `;\n}\n\nfunction renderExercise(data, exerciseId) {\n  const { content } = getModalEls();\n  if (!content) return;\n\n  const name = data?.name ?? 'Exercise';\n  const gifUrl = data?.gifUrl ?? '';\n\n  const ratingText = formatRating(data?.rating);\n  const starsHtml = renderStars(data?.rating);\n\n  const target = data?.target ?? '-';\n  const bodyPart = data?.bodyPart ?? '-';\n  const burnedCalories = data?.burnedCalories ?? '-';\n  const description = data?.description ?? '';\n\n  const equipment = data?.equipment ?? 'body weight';\n  const popular = data?.popular ?? data?.popularity ?? '150';\n\n  const favText = isFav(exerciseId) ? 'Remove from favorites' : 'Add to favorites ♡';\n\n  content.innerHTML = `\n    <div class=\"modal-exercise__media\">\n      ${gifUrl ? `<img class=\"modal-exercise__img\" src=\"${gifUrl}\" alt=\"${name}\" loading=\"lazy\" />` : ''}\n    </div>\n\n    <div class=\"modal-exercise__info\">\n      <h2 class=\"modal-exercise__title\">${name}</h2>\n\n      <div class=\"modal-exercise__rating-row\">\n        <span class=\"modal-exercise__rating-num\">${ratingText}</span>\n        ${starsHtml}\n      </div>\n\n      <div class=\"modal-exercise__divider\"></div>\n\n      <div class=\"modal-exercise__tags\">\n        <span class=\"tag\">Target <b>${target}</b></span>\n        <span class=\"tag\">Body Part <b>${bodyPart}</b></span>\n        <span class=\"tag\">Equipment <b>${equipment}</b></span>\n        <span class=\"tag\">Popular <b>${popular}</b></span>\n      </div>\n\n      <p class=\"modal-exercise__calories\">\n        Burned calories:<br> <b>${burnedCalories} / 3 min</b>\n      </p>\n\n      <div class=\"modal-exercise__divider\"></div>\n\n      <p class=\"modal-exercise__desc\">${description}</p>\n\n      <div class=\"modal-exercise__actions\">\n        <button class=\"btn btn--light\" type=\"button\" data-fav-toggle>${favText}</button>\n\n        <button\n          class=\"btn btn--outline\"\n          type=\"button\"\n          data-open-rating\n          data-exercise-id=\"${exerciseId}\"\n        >\n          Give a rating\n        </button>\n      </div>\n    </div>\n  `;\n}\n\n// ========================\n// Event binding (safe)\n// ========================\nfunction bindModalEventsOnce() {\n  const { modal, content } = getModalEls();\n  if (!modal || !content) return;\n\n  if (modal.dataset.bound) return;\n  modal.dataset.bound = '1';\n\n  // close by click on backdrop / close button\n  modal.addEventListener('click', e => {\n    const isBackdrop = e.target === modal;\n    const isCloseBtn = e.target.closest('[data-close-modal]');\n    if (isBackdrop || isCloseBtn) closeModal();\n  });\n\n  // delegation inside content\n  content.addEventListener('click', e => {\n    // ⭐ rating\n    const ratingBtn = e.target.closest('[data-open-rating]');\n    if (ratingBtn) {\n      const exerciseId = ratingBtn.dataset.exerciseId;\n      if (!exerciseId) return console.error('Give a rating: missing data-exercise-id');\n\n      suspendExerciseModalForRating();\n      setTimeout(() => openRatingModal(exerciseId), 0);\n      return;\n    }\n\n    // ❤️ favorites toggle\n    const favBtn = e.target.closest('[data-fav-toggle]');\n    if (!favBtn) return;\n\n    if (!currentExerciseId || !currentExerciseData) return;\n\n    if (isFav(currentExerciseId)) {\n      removeFav(currentExerciseId);\n    } else {\n      addFav({\n        _id: currentExerciseData._id,\n        name: currentExerciseData.name,\n        burnedCalories: currentExerciseData.burnedCalories,\n        target: currentExerciseData.target,\n        bodyPart: currentExerciseData.bodyPart,\n        equipment: currentExerciseData.equipment,\n        rating: currentExerciseData.rating,\n        gifUrl: currentExerciseData.gifUrl,\n        description: currentExerciseData.description,\n        popular: currentExerciseData.popular ?? currentExerciseData.popularity,\n      });\n    }\n\n    renderExercise(currentExerciseData, currentExerciseId);\n  });\n}\n\nbindModalEventsOnce();\ndocument.addEventListener('DOMContentLoaded', bindModalEventsOnce);\n\n// ========================\n// Public open\n// ========================\nexport async function openExerciseModal(exerciseId) {\n  if (!exerciseId) {\n    console.error('openExerciseModal: exerciseId is missing');\n    return;\n  }\n\n  const { modal, content } = getModalEls();\n  if (!modal || !content) {\n    console.warn('openExerciseModal: modal DOM not found on this page');\n    return;\n  }\n\n  if (isLoading) return;\n  isLoading = true;\n\n  try {\n    currentExerciseId = exerciseId;\n\n    forceHideRatingModal();\n\n    openModal();\n    renderLoading();\n\n    if (cache.has(exerciseId)) {\n      const data = cache.get(exerciseId);\n      currentExerciseData = data;\n      renderExercise(data, exerciseId);\n      return;\n    }\n\n    const data = await api.getExerciseById(exerciseId);\n    if (!data) throw new Error('No data returned from API');\n\n    cache.set(exerciseId, data);\n    currentExerciseData = data;\n    renderExercise(data, exerciseId);\n  } catch (err) {\n    console.error('openExerciseModal error:', err);\n    alert('Failed to load exercise');\n    closeModal();\n  } finally {\n    isLoading = false;\n  }\n}\n\n// ✅ коли закрили rating — повертаємо exercise\nwindow.addEventListener('rating:closed', () => {\n  resumeExerciseModalAfterRating();\n});\n","export function initMobileMenu() {\n  const menu = document.querySelector('[data-mobile-menu]');\n  const openBtn = document.querySelector('[data-menu-open]');\n  const closeEls = document.querySelectorAll('[data-menu-close]');\n\n  if (!menu || !openBtn) {\n    console.warn('Mobile menu: markup not found', { menu, openBtn });\n    return;\n  }\n\n  const open = () => {\n    menu.classList.add('is-open');\n    menu.setAttribute('aria-hidden', 'false');\n    openBtn.setAttribute('aria-expanded', 'true');\n    document.body.style.overflow = 'hidden';\n  };\n\n  const close = () => {\n    menu.classList.remove('is-open');\n    menu.setAttribute('aria-hidden', 'true');\n    openBtn.setAttribute('aria-expanded', 'false');\n    document.body.style.overflow = '';\n  };\n\n  openBtn.addEventListener('click', open);\n  closeEls.forEach(el => el.addEventListener('click', close));\n\n  document.addEventListener('keydown', e => {\n    if (e.key === 'Escape') close();\n  });\n}\n","import { api } from '../api/yourEnergyApi.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.querySelector('.footer__form');\n  if (!form) return;\n\n  form.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    const emailInput =\n      form.querySelector('input[type=\"email\"]') ||\n      form.querySelector('input[name=\"email\"]');\n\n    const email = emailInput?.value?.trim();\n    if (!email) return;\n\n    try {\n      // якщо у тебе в api є метод subscription/subscribe — використай його\n      if (typeof api?.subscription === 'function') {\n        await api.subscription({ email });\n      } else if (typeof api?.subscribe === 'function') {\n        await api.subscribe({ email });\n      } else {\n        // fallback напряму\n        const res = await fetch('https://your-energy.b.goit.study/api/subscription', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ email }),\n        });\n        if (!res.ok) throw new Error(`Subscription failed: ${res.status}`);\n      }\n\n      form.reset();\n      // тут можеш показати “success” як у макеті\n    } catch (err) {\n      console.error('❌ Subscription error:', err);\n    }\n  });\n});\n"],"names":["BASE_URL","request","endpoint","options","res","data","msg","api","filter","page","limit","params","bodypart","muscles","equipment","keyword","id","rate","email","comment","rating","STAR_FULL_SRC","STAR_EMPTY_SRC","currentExerciseId","currentRating","els","getElsOnce","ratingModal","ratingValueEl","starsWrap","form","isModalVisible","modalEl","anyModalOpen","ex","rt","lockBodyScroll","scrollBarWidth","unlockBodyScrollIfNoModals","toastTimer","showToast","text","type","old","el","clamp","n","min","max","paintStars","value","fullCount","btn","v","img","renderStars","i","onEsc","closeRatingModal","got","initRatingModal","e","isBackdrop","isCloseBtn","fd","err","openRatingModal","exerciseId","PAGINATION_BP","fixPaginationPlacement","container","pagination","marker","isMobile","quote","paginationState","renderPagination","getMobileWindow3","totalPages","currentPage","_","start","buildPages","onPageChange","root","pages","p","next","LS_KEY","isLoading","cache","currentExerciseData","wasSuspendedForRating","prevExerciseModalDisplay","getFavs","raw","arr","isFav","x","saveFavs","addFav","favs","removeFav","getModalEls","modal","content","forceHideRatingModal","suspendExerciseModalForRating","resumeExerciseModalAfterRating","closeModal","openModal","formatRating","getFullStarsCount","ratingValue","full","empty","fullImg","emptyImg","renderLoading","renderExercise","name","gifUrl","ratingText","starsHtml","target","bodyPart","burnedCalories","description","popular","favText","bindModalEventsOnce","ratingBtn","openExerciseModal","initMobileMenu","menu","openBtn","closeEls","open","close","emailInput","_a"],"mappings":"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"}