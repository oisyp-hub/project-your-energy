{"version":3,"file":"index.js","sources":["../src/js/services/storage.js","../src/js/state/homeState.js","../src/js/home/home.js","../src/js/components/mobileMenu.js","../src/main.js"],"sourcesContent":["const QUOTE_KEY = 'ye_quote_daily_v1';\n\nfunction todayKey() {\n  // YYYY-MM-DD\n  return new Date().toISOString().slice(0, 10);\n}\n\nexport const storage = {\n  load(key) {\n    try {\n      const raw = localStorage.getItem(key);\n      return raw ? JSON.parse(raw) : null;\n    } catch {\n      return null;\n    }\n  },\n\n  save(key, value) {\n    localStorage.setItem(key, JSON.stringify(value));\n  },\n\n  async getDailyQuote(fetcher) {\n    const cached = this.load(QUOTE_KEY);\n    const today = todayKey();\n\n    if (cached && cached.date === today && cached.data) {\n      return cached.data;\n    }\n\n    const data = await fetcher();\n    this.save(QUOTE_KEY, { date: today, data });\n    return data;\n  },\n};\n","export const homeState = {\n  activeFilter: 'Muscles', // default по ТЗ\n  page: 1,\n  limit: 10,\n  selectedCategory: null, // { name, filter }\n  keyword: '',\n};\n","import { api } from '../api/yourEnergyApi';\nimport { storage } from '../services/storage';\nimport { homeState } from '../state/homeState';\nimport { openExerciseModal } from '../components/exerciseModal';\n\nconst PAGINATION_BP = 600;\n\n// ========================\n// Pagination helpers\n// ========================\nlet lastTotalPages = 1; // щоб на resize перемальовувати коректно\n\nfunction getPagesMobile3(totalPages, currentPage) {\n  if (totalPages <= 3) {\n    return Array.from({ length: totalPages }, (_, i) => i + 1);\n  }\n\n  let start = Number(currentPage) || 1;\n  if (start > totalPages - 2) start = totalPages - 2;\n  if (start < 1) start = 1;\n\n  return [start, start + 1, start + 2];\n}\n\nfunction getPagesForPagination(totalPages, currentPage) {\n  const isMobile = window.matchMedia(`(max-width: ${PAGINATION_BP}px)`).matches;\n\n  if (isMobile) {\n    return getPagesMobile3(totalPages, currentPage);\n  }\n\n  // ✅ десктоп як було: до 10 кнопок\n  const max = Math.min(totalPages, 10);\n  return Array.from({ length: max }, (_, i) => i + 1);\n}\n\n// ========================\n// ✅ ПІД ТВОЮ ВЕРСТКУ\n// ========================\nconst refs = {\n  quoteText: document.querySelector('.quote-card__text'),\n  quoteAuthor: document.querySelector('.quote-card__author'),\n\n  tabs: document.querySelector('.exercises__tabs'),\n  categories:\n    document.querySelector('#categories-list') ||\n    document.querySelector('.categories'),\n  pagination: document.querySelector('.pagination'),\n\n  exercisesSection: document.querySelector('#exercises-section'),\n  exercisesTitle: document.querySelector('#exercises-title'),\n  exercisesList: document.querySelector('#exercises-list'),\n\n  // ✅ ГОЛОВНИЙ ЗАГОЛОВОК \"Exercises\" (для breadcrumb)\n  mainTitle: document.querySelector('.exercises__title'),\n\n  // ✅ TOP SEARCH (в хедері)\n  searchForm: document.querySelector('#top-search-form'),\n  searchInput: document.querySelector('#top-search-input'),\n};\n\nconst FILTERS = ['Muscles', 'Body parts', 'Equipment'];\n\n// ========================\n// Pagination placement (mobile only)\n// - mobile: cards -> pagination -> quote\n// - desktop: restore to original place\n// ========================\nfunction fixPaginationPlacement() {\n  if (!refs.pagination) return;\n\n  // намагаємось знайти контейнер секції\n  const container =\n    document.querySelector('.exercises__container') ||\n    refs.pagination.closest('.exercises__container') ||\n    refs.pagination.parentElement;\n\n  if (!container) return;\n\n  const pagination = refs.pagination;\n\n  // маркер \"де пагінація має жити на десктопі\"\n  let marker = container.querySelector('[data-pagination-home]');\n  if (!marker) {\n    marker = document.createElement('span');\n    marker.dataset.paginationHome = '1';\n    marker.hidden = true;\n\n    // запам’ятовуємо поточне місце (desktop) — вставляємо маркер ПЕРЕД пагінацією\n    pagination.parentNode.insertBefore(marker, pagination);\n  }\n\n  const isMobile = window.matchMedia(`(max-width: ${PAGINATION_BP}px)`).matches;\n\n  // wrapper quote-картки (звідси точно є .quote-card__text)\n  const quoteCard =\n    document.querySelector('.quote-card') ||\n    container.querySelector('.quote-card') ||\n    container.querySelector('[data-quote]');\n\n  if (isMobile && quoteCard) {\n    // ✅ мобілка: перед Quote\n    quoteCard.insertAdjacentElement('beforebegin', pagination);\n  } else {\n    // ✅ десктоп: повертаємо назад (після маркера)\n    marker.insertAdjacentElement('afterend', pagination);\n  }\n}\n\n// ========================\n// Init\n// ========================\nexport async function initHome() {\n  if (!refs.tabs || !refs.categories) {\n    console.warn('Home markup not found: check selectors in home.js');\n    return;\n  }\n\n  // ✅ початковий стейт\n  homeState.activeFilter = homeState.activeFilter || 'Muscles';\n  homeState.page = homeState.page || 1;\n  homeState.limit = homeState.limit || 10;\n  homeState.selectedCategory = null;\n  homeState.keyword = '';\n\n  renderTabs();\n  await loadAndRenderQuote();\n  await loadAndRenderCategories();\n\n  bindEvents();\n\n  // щоб одразу встати правильно (особливо якщо quote/контент домальовується)\n  fixPaginationPlacement();\n  setTimeout(fixPaginationPlacement, 0);\n  setTimeout(fixPaginationPlacement, 100);\n\n  // на resize: перемістити + перерендерити кнопки (3 на моб / до 10 на десктоп)\n  window.addEventListener('resize', () => {\n    if (refs.pagination) renderPagination(lastTotalPages, homeState.page);\n    fixPaginationPlacement();\n  });\n}\n\n// ========================\n// Quote\n// ========================\nasync function loadAndRenderQuote() {\n  try {\n    const data = await storage.getDailyQuote(() => api.getQuote());\n    const quote = data.quote || data.text || '';\n    const author = data.author || 'Unknown';\n\n    if (refs.quoteText) refs.quoteText.textContent = quote;\n    if (refs.quoteAuthor) refs.quoteAuthor.textContent = author;\n  } catch (e) {\n    if (refs.quoteText) refs.quoteText.textContent = 'Failed to load quote.';\n    if (refs.quoteAuthor) refs.quoteAuthor.textContent = '';\n    console.error(e);\n  }\n}\n\n// ========================\n// Tabs\n// ========================\nfunction renderTabs() {\n  refs.tabs.innerHTML = FILTERS.map(f => {\n    const active = f === homeState.activeFilter ? 'is-active' : '';\n    return `\n      <button\n        class=\"exercises__tab ${active}\"\n        type=\"button\"\n        data-filter=\"${f}\"\n        role=\"tab\"\n        aria-selected=\"${f === homeState.activeFilter ? 'true' : 'false'}\"\n      >\n        ${f}\n      </button>`;\n  }).join('');\n}\n\n/* ✅ Breadcrumb у заголовку: Exercises / abs */\nfunction setMainTitle(categoryName = '') {\n  if (!refs.mainTitle) return;\n\n  if (!categoryName) {\n    refs.mainTitle.textContent = 'Exercises';\n    return;\n  }\n\n  refs.mainTitle.innerHTML = `Exercises <span class=\"exercises__subtitle\">/ ${escapeHtml(\n    categoryName\n  )}</span>`;\n}\n\n// ✅ показ categories, ховаємо exercises\nfunction showCategoriesView() {\n  refs.categories.classList.remove('is-hidden');\n\n  if (refs.exercisesSection) refs.exercisesSection.classList.add('is-hidden');\n  if (refs.exercisesList) refs.exercisesList.innerHTML = '';\n\n  // ✅ TOP SEARCH ховаємо\n  if (refs.searchForm) refs.searchForm.classList.add('is-hidden');\n\n  // ✅ повертаємо \"Exercises\" без \"/ ...\"\n  setMainTitle('');\n\n  // ✅ прибираємо дубльований заголовок справа (якщо він був)\n  if (refs.exercisesTitle) refs.exercisesTitle.textContent = '';\n}\n\n// ✅ показ exercises, ховаємо categories\nfunction showExercisesView() {\n  refs.categories.classList.add('is-hidden');\n\n  // ✅ TOP SEARCH показуємо\n  if (refs.searchForm) refs.searchForm.classList.remove('is-hidden');\n\n  if (!refs.exercisesSection) {\n    refs.categories.classList.remove('is-hidden');\n    refs.categories.innerHTML = `\n      <li style=\"padding:16px;\">\n        ❗ Не знайдено блок <b>#exercises-section</b> у hero.html.\n        Додай його (section з id=\"exercises-section\", ul з id=\"exercises-list\").\n      </li>`;\n    return;\n  }\n\n  refs.exercisesSection.classList.remove('is-hidden');\n\n  if (!refs.exercisesList) {\n    refs.exercisesSection.innerHTML = `\n      <p style=\"padding:16px;\">\n        ❗ Не знайдено <b>#exercises-list</b> у hero.html.\n        Додай ul з id=\"exercises-list\".\n      </p>`;\n  }\n}\n\n// ========================\n// Categories\n// ========================\nasync function loadAndRenderCategories() {\n  showCategoriesView();\n\n  try {\n    const { activeFilter, page, limit } = homeState;\n    const data = await api.getFilters({ filter: activeFilter, page, limit });\n\n    const items = data.results || data.data || data || [];\n\n    if (!items.length) {\n      refs.categories.innerHTML = `<li>No categories for \"${activeFilter}\"</li>`;\n      if (refs.pagination) refs.pagination.innerHTML = '';\n      lastTotalPages = 1;\n      fixPaginationPlacement();\n      return;\n    }\n\n    refs.categories.innerHTML = items\n      .map(item => categoryCardTpl(item, activeFilter))\n      .join('');\n\n    if (refs.pagination && data.totalPages && Number(data.totalPages) > 1) {\n      lastTotalPages = Number(data.totalPages) || 1;\n      renderPagination(lastTotalPages, homeState.page);\n    } else if (refs.pagination) {\n      refs.pagination.innerHTML = '';\n      lastTotalPages = 1;\n    }\n\n    fixPaginationPlacement();\n  } catch (e) {\n    refs.categories.innerHTML = `<li>Failed to load categories.</li>`;\n    if (refs.pagination) refs.pagination.innerHTML = '';\n    lastTotalPages = 1;\n    fixPaginationPlacement();\n    console.error(e);\n  }\n}\n\nfunction categoryCardTpl(item, filter) {\n  const name = item.name || item.filter || 'Category';\n  const img = item.imgURL || item.imgUrl || item.image || '';\n\n  return `\n    <li class=\"category-card\">\n      <button\n        type=\"button\"\n        class=\"category-card__btn\"\n        data-category=\"${escapeAttr(name)}\"\n        data-filter=\"${escapeAttr(filter)}\"\n        style=\"all: unset; cursor: pointer; display:block; width:100%; height:100%;\"\n      >\n        ${\n    img\n      ? `<img class=\"category-card__img\" src=\"${img}\" alt=\"${escapeAttr(\n        name\n      )}\" loading=\"lazy\" />`\n      : ''\n  }\n        <div class=\"category-card__overlay\">\n          <p class=\"category-card__name\">${escapeHtml(name)}</p>\n          <p class=\"category-card__type\">${escapeHtml(filter)}</p>\n        </div>\n      </button>\n    </li>\n  `;\n}\n\n// ========================\n// Exercises\n// ========================\nasync function loadAndRenderExercises() {\n  if (!homeState.selectedCategory) return;\n\n  showExercisesView();\n\n  const { activeFilter, selectedCategory, keyword, page, limit } = homeState;\n\n  if (!refs.exercisesSection || !refs.exercisesList) return;\n\n  // ✅ Breadcrumb: \"Exercises / abs\"\n  setMainTitle(selectedCategory.name);\n\n  // ✅ прибираємо дубль заголовка справа\n  if (refs.exercisesTitle) refs.exercisesTitle.textContent = '';\n\n  const params = { page, limit };\n  if (activeFilter === 'Muscles') params.muscles = selectedCategory.name;\n  if (activeFilter === 'Body parts') params.bodypart = selectedCategory.name;\n  if (activeFilter === 'Equipment') params.equipment = selectedCategory.name;\n  if (keyword) params.keyword = keyword;\n\n  try {\n    const data = await api.getExercises(params);\n    const items = data.results || data.data || data || [];\n\n    if (!items.length) {\n      refs.exercisesList.innerHTML = `<li style=\"padding:16px;\">No exercises found.</li>`;\n      if (refs.pagination && data.totalPages && Number(data.totalPages) > 1) {\n        lastTotalPages = Number(data.totalPages) || 1;\n        renderPagination(lastTotalPages, page);\n      } else if (refs.pagination) {\n        refs.pagination.innerHTML = '';\n        lastTotalPages = 1;\n      }\n      fixPaginationPlacement();\n      return;\n    }\n\n    refs.exercisesList.innerHTML = items.map(exerciseCardTpl).join('');\n\n    if (refs.pagination && data.totalPages && Number(data.totalPages) > 1) {\n      lastTotalPages = Number(data.totalPages) || 1;\n      renderPagination(lastTotalPages, page);\n    } else if (refs.pagination) {\n      refs.pagination.innerHTML = '';\n      lastTotalPages = 1;\n    }\n\n    fixPaginationPlacement();\n  } catch (e) {\n    console.error(e);\n    refs.exercisesList.innerHTML = `<li style=\"padding:16px;\">Failed to load exercises.</li>`;\n    if (refs.pagination) refs.pagination.innerHTML = '';\n    lastTotalPages = 1;\n    fixPaginationPlacement();\n  }\n}\n\n/* ✅ картка вправи */\nfunction exerciseCardTpl(ex) {\n  const id = ex._id || ex.id;\n\n  const name = ex.name || 'Exercise';\n  const ratingNum = Number(ex.rating ?? 0);\n  const rating = Number.isFinite(ratingNum) ? ratingNum.toFixed(1) : '0.0';\n\n  const bodyPart = ex.bodyPart || ex.bodypart || '-';\n  const target = ex.target || '-';\n\n  const burnedCalories = ex.burnedCalories ?? ex.calories ?? '-';\n\n  // по макету завжди \" / 3 min\"\n  const time = 3;\n\n  return `\n    <li class=\"exercise-card\">\n      <div class=\"exercise-card__top\">\n        <div class=\"exercise-card__top-left\">\n          <span class=\"exercise-card__badge\">WORKOUT</span>\n\n          <span class=\"exercise-card__rating\">\n            ${rating}\n            <img\n              class=\"exercise-card__star-img\"\n              src=\"./img/star.png\"\n              alt=\"\"\n              aria-hidden=\"true\"\n            />\n          </span>\n        </div>\n\n        <button class=\"exercise-card__start\" type=\"button\" data-exercise-id=\"${escapeAttr(\n    id\n  )}\">\n          Start <span class=\"exercise-card__arrow\">→</span>\n        </button>\n      </div>\n\n      <div class=\"exercise-card__name-row\">\n        <span class=\"exercise-card__icon-wrap\" aria-hidden=\"true\">\n          <img class=\"exercise-card__icon\" src=\"./img/icon.png\" alt=\"\" />\n        </span>\n        <h4 class=\"exercise-card__name\">${escapeHtml(name)}</h4>\n      </div>\n\n      <p class=\"exercise-card__meta\">\n        <span>Burned calories: ${escapeHtml(String(burnedCalories))} / ${time} min</span>\n        <span>Body part: <b>${escapeHtml(String(bodyPart))}</b></span>\n        <span>Target: <b>${escapeHtml(String(target))}</b></span>\n      </p>\n    </li>\n  `;\n}\n\n// ========================\n// Events\n// ========================\nfunction bindEvents() {\n  // tabs click\n  refs.tabs.addEventListener('click', async e => {\n    const btn = e.target.closest('[data-filter]');\n    if (!btn) return;\n\n    const next = btn.dataset.filter;\n    if (next === homeState.activeFilter) return;\n\n    homeState.activeFilter = next;\n    homeState.page = 1;\n    homeState.selectedCategory = null;\n    homeState.keyword = '';\n\n    if (refs.searchInput) refs.searchInput.value = '';\n\n    renderTabs();\n    await loadAndRenderCategories();\n  });\n\n  // categories click\n  refs.categories.addEventListener('click', async e => {\n    const btn = e.target.closest('[data-category]');\n    if (!btn) return;\n\n    // ✅ якщо клікнули на start в карточці вправ — НЕ обробляємо як category\n    if (e.target.closest('[data-exercise-id]')) return;\n\n    const category = btn.dataset.category;\n    const filter = btn.dataset.filter;\n\n    homeState.selectedCategory = { name: category, filter };\n    homeState.page = 1;\n    homeState.keyword = '';\n\n    if (refs.searchInput) refs.searchInput.value = '';\n\n    await loadAndRenderExercises();\n  });\n\n  // ✅ TOP SEARCH submit\n  if (refs.searchForm) {\n    refs.searchForm.addEventListener('submit', async e => {\n      e.preventDefault();\n      if (!homeState.selectedCategory) return;\n\n      const value = (refs.searchInput?.value || '').trim();\n      homeState.keyword = value;\n      homeState.page = 1;\n\n      await loadAndRenderExercises();\n    });\n  }\n\n  // pagination click\n  if (refs.pagination) {\n    refs.pagination.addEventListener('click', async e => {\n      const btn = e.target.closest('[data-page]');\n      if (!btn) return;\n\n      const page = Number(btn.dataset.page);\n      if (!Number.isFinite(page) || page === homeState.page) return;\n\n      homeState.page = page;\n\n      if (homeState.selectedCategory) {\n        await loadAndRenderExercises();\n      } else {\n        await loadAndRenderCategories();\n      }\n    });\n  }\n\n  // ✅ Start click -> відкриває модалку\n  document.addEventListener('click', async e => {\n    const btn = e.target.closest('[data-exercise-id]');\n    if (!btn) return;\n\n    e.preventDefault();\n\n    const id = btn.dataset.exerciseId;\n    await openExerciseModal(id);\n  });\n}\n\n// ========================\n// ✅ Pagination render (FIXED)\n// mobile: 3 pages window (123, 234, 345...)\n// desktop: до 10\n// ========================\nfunction renderPagination(totalPages, currentPage) {\n  if (!refs.pagination) return;\n\n  const pages = Math.max(1, Number(totalPages) || 1);\n\n  // якщо сторінка 1/1 — не показуємо пагінацію\n  if (pages <= 1) {\n    refs.pagination.innerHTML = '';\n    return;\n  }\n\n  const pageList = getPagesForPagination(pages, currentPage);\n\n  const buttons = pageList\n    .map(p => {\n      const isActive = p === currentPage;\n      return `\n        <button\n          type=\"button\"\n          class=\"pagination__btn ${isActive ? 'is-active' : ''}\"\n          data-page=\"${p}\"\n          ${isActive ? 'aria-current=\"page\"' : ''}\n        >${p}</button>`;\n    })\n    .join('');\n\n  refs.pagination.innerHTML = buttons;\n}\n\n// ========================\n// helpers\n// ========================\nfunction escapeHtml(str) {\n  return String(str)\n    .replaceAll('&', '&amp;')\n    .replaceAll('<', '&lt;')\n    .replaceAll('>', '&gt;')\n    .replaceAll('\"', '&quot;')\n    .replaceAll(\"'\", '&#039;');\n}\nfunction escapeAttr(str) {\n  return escapeHtml(str).replaceAll('`', '&#096;');\n}\n","export function initMobileMenu() {\n  const menu = document.querySelector('[data-mobile-menu]');\n  const openBtn = document.querySelector('[data-menu-open]');\n  const closeEls = document.querySelectorAll('[data-menu-close]');\n\n  if (!menu || !openBtn) {\n    console.warn('Mobile menu: markup not found', { menu, openBtn });\n    return;\n  }\n\n  const open = () => {\n    menu.classList.add('is-open');\n    menu.setAttribute('aria-hidden', 'false');\n    openBtn.setAttribute('aria-expanded', 'true');\n    document.body.style.overflow = 'hidden';\n  };\n\n  const close = () => {\n    menu.classList.remove('is-open');\n    menu.setAttribute('aria-hidden', 'true');\n    openBtn.setAttribute('aria-expanded', 'false');\n    document.body.style.overflow = '';\n  };\n\n  openBtn.addEventListener('click', open);\n  closeEls.forEach(el => el.addEventListener('click', close));\n\n  document.addEventListener('keydown', e => {\n    if (e.key === 'Escape') close();\n  });\n}\n","import './css/header.css';\nimport './css/hero.css';\nimport './css/exercises.css';\nimport './css/footer.css';\nimport './css/fonts.css';\nimport './css/modal.css';\n\nimport { initHome } from './js/home/home.js';\nimport { initMobileMenu } from './js/components/mobileMenu.js';\nimport { initRatingModal } from './js/components/rating-modal.js';\n\nfunction setActiveHeaderTab() {\n  const nav = document.querySelector('.header-center');\n  if (!nav) return;\n\n  const path = window.location.pathname;\n  const isHome = path.endsWith('/') || path.endsWith('index.html');\n  const activeKey = isHome ? 'home' : 'favorites';\n\n  nav.querySelectorAll('.nav-item').forEach(a => {\n    const isActive = a.dataset.nav === activeKey;\n    a.classList.toggle('active', isActive);\n\n    if (isActive) a.setAttribute('aria-current', 'page');\n    else a.removeAttribute('aria-current');\n  });\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  setActiveHeaderTab();\n  initMobileMenu();\n  initRatingModal();\n  initHome();\n});\n"],"names":["QUOTE_KEY","todayKey","storage","key","raw","value","fetcher","cached","today","data","homeState","PAGINATION_BP","lastTotalPages","getPagesMobile3","totalPages","currentPage","_","i","start","getPagesForPagination","max","refs","FILTERS","fixPaginationPlacement","container","pagination","marker","isMobile","quoteCard","initHome","renderTabs","loadAndRenderQuote","loadAndRenderCategories","bindEvents","renderPagination","api","quote","author","f","setMainTitle","categoryName","escapeHtml","showCategoriesView","showExercisesView","activeFilter","page","limit","items","item","categoryCardTpl","filter","name","img","escapeAttr","loadAndRenderExercises","selectedCategory","keyword","params","exerciseCardTpl","e","ex","id","ratingNum","rating","bodyPart","target","burnedCalories","btn","next","category","_a","openExerciseModal","pages","buttons","p","isActive","str","initMobileMenu","menu","openBtn","closeEls","open","close","el","setActiveHeaderTab","nav","path","activeKey","a","initRatingModal"],"mappings":"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"}